// file location: src/lib/tyre/tyreAPI.js
// ðŸ”§ Temporary placeholder API
// âœ… To be replaced later with live API integration via process.env.TYRE_API_URL

// TODO: Replace placeholder data with live API from process.env.TYRE_API_URL (.env.local)
export const tyreMakes = [
  "Michelin", // Placeholder tyre make
  "Continental", // Placeholder tyre make
  "Goodyear", // Placeholder tyre make
  "Pirelli", // Placeholder tyre make
  "Bridgestone", // Placeholder tyre make
  "Dunlop", // Placeholder tyre make
  "Yokohama", // Placeholder tyre make
  "Hankook", // Placeholder tyre make
  "Kumho", // Placeholder tyre make
  "Falken", // Placeholder tyre make
  "Toyo", // Placeholder tyre make
  "Nexen", // Placeholder tyre make
  "Firestone", // Placeholder tyre make
  "Avon", // Placeholder tyre make
  "Cooper" // Placeholder tyre make
];

// TODO: Replace placeholder data with live API from process.env.TYRE_API_URL (.env.local)
export const tyreSizes = [
  "185/60R14", // Placeholder tyre size
  "195/65R15", // Placeholder tyre size
  "205/55R16", // Placeholder tyre size
  "215/50R17", // Placeholder tyre size
  "225/45R17", // Placeholder tyre size
  "225/55R18", // Placeholder tyre size
  "235/45R18", // Placeholder tyre size
  "235/55R19", // Placeholder tyre size
  "245/35R19", // Placeholder tyre size
  "255/40R19", // Placeholder tyre size
  "255/45R20", // Placeholder tyre size
  "265/35R20", // Placeholder tyre size
  "275/40R20", // Placeholder tyre size
  "285/45R22", // Placeholder tyre size
  "295/35R21" // Placeholder tyre size
];

// TODO: Replace placeholder data with live API from process.env.TYRE_API_URL (.env.local)
export const loadIndexes = [
  "88", // Placeholder load index
  "90", // Placeholder load index
  "91", // Placeholder load index
  "92", // Placeholder load index
  "94", // Placeholder load index
  "96", // Placeholder load index
  "97", // Placeholder load index
  "98", // Placeholder load index
  "99", // Placeholder load index
  "100", // Placeholder load index
  "101", // Placeholder load index
  "102", // Placeholder load index
  "103", // Placeholder load index
  "104", // Placeholder load index
  "107" // Placeholder load index
];

// TODO: Replace placeholder data with live API from process.env.TYRE_API_URL (.env.local)
export const speedRatings = [
  "H", // Placeholder speed rating
  "V", // Placeholder speed rating
  "W", // Placeholder speed rating
  "Y", // Placeholder speed rating
  "Z", // Placeholder speed rating
  "T", // Placeholder speed rating
  "S", // Placeholder speed rating
  "R", // Placeholder speed rating
  "Q", // Placeholder speed rating
  "P" // Placeholder speed rating
];

// TODO: Replace placeholder data with live API from process.env.TYRE_API_URL (.env.local)
export const tyreData = [
  {
    make: "Michelin", // Placeholder tyre make
    size: "205/55R16", // Placeholder tyre size
    load: "91", // Placeholder load index
    speed: "V", // Placeholder speed rating
    cost_company: 72.5, // Placeholder company cost
    cost_customer: 104.99, // Placeholder customer price
    availability: "In Stock" // Placeholder availability
  },
  {
    make: "Yokohama", // Placeholder tyre make
    size: "225/55R18", // Placeholder tyre size
    load: "98", // Placeholder load index
    speed: "V", // Placeholder speed rating
    cost_company: 80.0, // Placeholder company cost
    cost_customer: 119.0, // Placeholder customer price
    availability: "2 Days" // Placeholder availability
  },
  {
    make: "Continental", // Placeholder tyre make
    size: "245/35R19", // Placeholder tyre size
    load: "93", // Placeholder load index
    speed: "Y", // Placeholder speed rating
    cost_company: 110.0, // Placeholder company cost
    cost_customer: 155.0, // Placeholder customer price
    availability: "Out of Stock" // Placeholder availability
  },
  {
    make: "Goodyear", // Placeholder tyre make
    size: "195/65R15", // Placeholder tyre size
    load: "91", // Placeholder load index
    speed: "H", // Placeholder speed rating
    cost_company: 58.25, // Placeholder company cost
    cost_customer: 89.99, // Placeholder customer price
    availability: "In Stock" // Placeholder availability
  },
  {
    make: "Pirelli", // Placeholder tyre make
    size: "225/45R17", // Placeholder tyre size
    load: "94", // Placeholder load index
    speed: "W", // Placeholder speed rating
    cost_company: 92.0, // Placeholder company cost
    cost_customer: 139.95, // Placeholder customer price
    availability: "Next Day" // Placeholder availability
  },
  {
    make: "Bridgestone", // Placeholder tyre make
    size: "255/45R20", // Placeholder tyre size
    load: "105", // Placeholder load index (extended for placeholder)
    speed: "W", // Placeholder speed rating
    cost_company: 130.0, // Placeholder company cost
    cost_customer: 182.5, // Placeholder customer price
    availability: "3 Days" // Placeholder availability
  },
  {
    make: "Dunlop", // Placeholder tyre make
    size: "235/45R18", // Placeholder tyre size
    load: "98", // Placeholder load index
    speed: "Y", // Placeholder speed rating
    cost_company: 86.0, // Placeholder company cost
    cost_customer: 129.0, // Placeholder customer price
    availability: "In Stock" // Placeholder availability
  },
  {
    make: "Hankook", // Placeholder tyre make
    size: "215/50R17", // Placeholder tyre size
    load: "95", // Placeholder load index (extended placeholder)
    speed: "V", // Placeholder speed rating
    cost_company: 64.5, // Placeholder company cost
    cost_customer: 102.75, // Placeholder customer price
    availability: "In Stock" // Placeholder availability
  },
  {
    make: "Kumho", // Placeholder tyre make
    size: "185/60R14", // Placeholder tyre size
    load: "86", // Placeholder load index (extended placeholder)
    speed: "H", // Placeholder speed rating
    cost_company: 48.0, // Placeholder company cost
    cost_customer: 72.0, // Placeholder customer price
    availability: "In Stock" // Placeholder availability
  },
  {
    make: "Falken", // Placeholder tyre make
    size: "235/55R19", // Placeholder tyre size
    load: "105", // Placeholder load index (extended placeholder)
    speed: "V", // Placeholder speed rating
    cost_company: 98.75, // Placeholder company cost
    cost_customer: 142.99, // Placeholder customer price
    availability: "Next Day" // Placeholder availability
  },
  {
    make: "Toyo", // Placeholder tyre make
    size: "265/35R20", // Placeholder tyre size
    load: "99", // Placeholder load index
    speed: "Y", // Placeholder speed rating
    cost_company: 120.0, // Placeholder company cost
    cost_customer: 168.0, // Placeholder customer price
    availability: "Pre-Order" // Placeholder availability
  },
  {
    make: "Nexen", // Placeholder tyre make
    size: "275/40R20", // Placeholder tyre size
    load: "106", // Placeholder load index (extended placeholder)
    speed: "W", // Placeholder speed rating
    cost_company: 88.0, // Placeholder company cost
    cost_customer: 129.99, // Placeholder customer price
    availability: "In Stock" // Placeholder availability
  },
  {
    make: "Firestone", // Placeholder tyre make
    size: "295/35R21", // Placeholder tyre size
    load: "107", // Placeholder load index
    speed: "Y", // Placeholder speed rating
    cost_company: 146.0, // Placeholder company cost
    cost_customer: 199.99, // Placeholder customer price
    availability: "2 Days" // Placeholder availability
  },
  {
    make: "Avon", // Placeholder tyre make
    size: "205/55R16", // Placeholder tyre size
    load: "91", // Placeholder load index
    speed: "V", // Placeholder speed rating
    cost_company: 69.0, // Placeholder company cost
    cost_customer: 99.0, // Placeholder customer price
    availability: "In Stock" // Placeholder availability
  },
  {
    make: "Cooper", // Placeholder tyre make
    size: "225/55R18", // Placeholder tyre size
    load: "98", // Placeholder load index
    speed: "H", // Placeholder speed rating
    cost_company: 77.5, // Placeholder company cost
    cost_customer: 115.0, // Placeholder customer price
    availability: "4 Days" // Placeholder availability
  }
];

export function searchTyres(query = "") {
  const normalizedQuery = query.trim().toLowerCase(); // Normalise the search query for case-insensitive matching
  if (!normalizedQuery) {
    return []; // Return no matches when there is no query
  }

  return tyreData.filter((tyre) => {
    const makeMatch = tyre.make.toLowerCase().includes(normalizedQuery); // Match against tyre make
    const sizeMatch = tyre.size.toLowerCase().includes(normalizedQuery); // Match against tyre size
    const loadMatch = tyre.load.toLowerCase().includes(normalizedQuery); // Match against tyre load index
    const speedMatch = tyre.speed.toLowerCase().includes(normalizedQuery); // Match against tyre speed rating
    return makeMatch || sizeMatch || loadMatch || speedMatch; // Include the tyre when any field matches
  });
}

export function getTyreDetails(make, size, load, speed) {
  const normalizedMake = (make || "").toLowerCase(); // Normalise the make for matching
  const normalizedSize = (size || "").toLowerCase(); // Normalise the size for matching
  const normalizedLoad = (load || "").toLowerCase(); // Normalise the load index for matching
  const normalizedSpeed = (speed || "").toLowerCase(); // Normalise the speed rating for matching

  return tyreData.find((tyre) => {
    const makeMatch = tyre.make.toLowerCase() === normalizedMake; // Ensure make matches exactly
    const sizeMatch = tyre.size.toLowerCase() === normalizedSize; // Ensure size matches exactly
    const loadMatch = tyre.load.toLowerCase() === normalizedLoad; // Ensure load index matches exactly
    const speedMatch = tyre.speed.toLowerCase() === normalizedSpeed; // Ensure speed rating matches exactly
    return makeMatch && sizeMatch && loadMatch && speedMatch; // Return the tyre that matches all criteria
  }) || null; // Return null when no tyre matches the provided details
}
