{/* Main content */}
      <div
        style={{
          flex: 1,
          backgroundColor: colors.mainBg,
          display: "flex",
          flexDirection: "column",
          overflowY: "auto",
        }}
      >
        {!hideSidebar && (
          <header
            style={{
              backgroundColor: colors.headerBg,
              padding: "16px",
              boxShadow: "0 2px 4px rgba(0,0,0,0.1)",
              display: "flex",
              justifyContent: "space-between",
              alignItems: "center",
            }}
          >
            <h1 style={{ fontSize: "1.25rem", fontWeight: 600, color: colors.accent }}>
              Welcome {user?.username || "Guest"} ({role})
            </h1>

            {/* Techs-only status dropdown */}
            {userRoles.includes("techs") && (
              <select
                value={status}
                onChange={(e) => setStatus(e.target.value)}
                style={{
                  padding: "6px 10px",
                  borderRadius: "6px",
                  border: `1px solid ${colors.accent}`,
                  backgroundColor: "white",
                  color: colors.accent,
                  fontWeight: "bold",
                  cursor: "pointer",
                }}
              >
                <option>Waiting for Job</option>
                <option>In Progress</option>
                <option>Break</option>
                <option>Completed</option>
              </select>
            )}
          </header>
        )}

        <main style={{ padding: "24px", boxSizing: "border-box" }}>{children}</main>
      </div>

      {/* NEW: Status Sidebar - always available for authorized users */}
      {canViewStatusSidebar && (
        <StatusSidebar
          jobId={activeJobId}
          currentStatus={currentJobStatus}
          isOpen={isStatusSidebarOpen}
          onToggle={() => setIsStatusSidebarOpen(!isStatusSidebarOpen)}
          onJobSearch={setSearchedJobId} // NEW: Pass search handler
          hasUrlJobId={!!urlJobId} // NEW: Tell sidebar if we're on a job page
        />
      )}

      {userRoles.includes("techs") && (
        <JobCardModal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)} />
      )}
    </div>
  );
}